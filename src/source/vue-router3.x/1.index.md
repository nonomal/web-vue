---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# 源码解析

::: tip 前言
首先使用 Vue.use 加载 Vue-Router 混入 beforeCreate 代码，在 Vue 项目初始化时执行，然后实例化 Vue-router，将实例以 router 的名称通过 Vue 初始化传入，初始化执行 beforeCreate 就可以在组件中拿到路由实例
:::

[Vue Router 官网](https://router.vuejs.org/zh/)

![](./VueRouter.png)

## 1.项目代码

- mian.js

```js
import Vue from "vue"
import App from "./App"
import router from "./router"

new Vue({
  el: "#app",
  router,
  render: (h) => h(App),
})
```

- `import router from "./router"`

```js
import Vue from "vue"
import Router from "vue-router"

Vue.use(Router)
let router = new Router({
  base: "/abstract-vue/",
  mode: "history",
  routes: [
    {
      path: "/",
      name: "login",
      component: () => import("@/views/Login"),
    },
  ],
})

export default router
```

## 2.首次加载

### 2.1 `Vue.use`

- /src/vue-router/src/install.js

<<< @/src/vue-router/src/install.js#snippet1

`install`执行时首先会调用`Vue.mixin`将`beforeCreate`和`destroyed`钩子函数注入到每一个组件中

在 Vue 原型上定义了 $router 和 $route 2 个属性的 get ⽅法

⼜通过 Vue.component ⽅法定义了全局的 `<router-link>` 和 `<router-view>` 2 个组件

### 2.2 `new Router`

- /src/vue-router/src/router.js

<<< @/src/vue-router/src/router.js#snippet1

### 2.3 `new Vue`

```js
new Vue({
  ...
  router,
  ...
})
```

- 项目通过此变量`Vue`与`vue-router`结合在一起（**名称固定写死**）

```js
this._router = this.$options.router
```

### 2.4 首次渲染

## 3.跳转进入

## 4.跳转离开
