---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# 八、动态渲染 vue 文件的组件--dispaly

你可能用过 jsfiddle 或者 jsbin 之类的网站，在里面你可以用 CDN 的形式引入 Vue.js，然后在线写示例，实际运行，比如下面这个例子：
https://jsfiddle.net/c87yh92v/

不过，这类网站主要是一个 html,里面包含 js、css、部分，渲染则适用 iframe 嵌入你编写的 html，并实时更新。在这些网站写示例，是不能直接写.vue 文件的，因为没法进行编译。

再看另一个网站 iView Run，它是能够在线编写一个标准的`.vue`文件，并及时渲染的，它也预置了 iView 环境，你可以使用 iView 组件库全部的组件。本小节，我们就来实现这样一个能够动态渲染.vue 文件的`Display`组件，当然，用到的核心技术就是上一节的`extend`和`$mount`。

## 接口设计

- 一个常规的`.vue`文件一般都会包含 3 个部分：
- `<template>`:组件的模板
- `<script>`:组件的选项，不包含`el`
- `<style>`:CSS 样式

回忆一下用`extend`来构造一个组件的实例，它的选项`template`其实就是上面`<template>`的内容，其余选项对应的是`<script>`,样式`<style>`事实上与 Vue.js 无关，我们可以先不管。这样的话，当拿到一个.vue 的文件（整体其实是字符串），只需要把`<template>`、`<script>`、`<style>`使用正则分割，把对应的部分传递给 extend 创建示例就可以。

Display 是一个功能型组件，没有交互和事件，只需要一个 prop：code 将.vue 的内容传递过来，其余工作都是在组件内完成的，这对使用者很友好。当然，你也可以设计成三个 props，分别对应 html、js、css，那分割的工作就要使用者来完成。处于使用者优先的原则，苦活累活当然是在组件内完成了，因此推荐第一个方案。
