---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# 八.组件发布

::: tip 前言
组件写好后，可以通过简单的配置已包的形式发布到 npm 上，用户通过 npm 安装相应的包。
:::

## 1.npm 部署

- **1.注册 npm**

  npm 官网注册个账号 https://www.npmjs.com/

- **2.登录 npm**

```bash
npm login
```

- **3.参数配置**

```js
// package.json
"main": "js/about.48e7d88e.js", // 设置入口文件
"private": false, // 设置为公开库
"keywords": [], // 设置搜索关键词
"description": "描述",
"author": "zhoubichuan",
"name": "zhoubichuan", // 在 npm 官网上存在相同的名称则会报错无法上传，会提示你没有权限修改此库
"version": "1.1.0", // 版本，每次上传的版本号不能相同，所以每次上传都要手动升级版本号
```

- **4.发布组件**

```bash
npm publish
```

- **5.撤销发布的 npm 包**

```sh
npm --force unpublish web-vue2x
```

- 需要注意的是：
  - 1、撤销 npm 包需要加上 --force 强制执行才可以实现;
  - 2、撤销的包不能立马再次发布

## 2.内网部署


```vue
<vue-switch src="data:image/webp;base64,UklGRgQDAABXRUJQVlA4WAoAAAAwAAAAKQAAKQAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZWUDhMFgEAAC8pQAoQh6CgbRsmu/THeKGhoG0bJh2y8Uf0NwNp24TNv+R/BIKQKRZoggA5H4I13mCPor6TryKUxbuCHwAAAEmSJEeRoylEkf//LatmqFXXiP4rcNtGOWZM9wgAAAAAAAAAAFweh6m4TR7bqdBJb+ey3Kayc5KaCpXkPBWuSXZDbjO6wHvYDIV9kusiCd3d3d3d3d3d3d3dneXFd0mSJEmSJEmSJO+uF773RbdQOVZVVVVVVVVVVVVVVVXVGHYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN9kVVYxvJrj8xLDr6E5yfAK/d/XM/wn6X/Mqr0bwLFvf19gKtyTk7EFnoP/U+kA" @select="handleSwitch" />
```
```vue
 <vue-switch
                    :src="`${open ? 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAASdJREFUWEftlTsOgkAQQGdRiaVHsZVKTqL2xMSTmBh6vYInkApbj6KlP9askYRssjsfLNAs7fwej9lFQcce1TEeCEDYFwmGgiHMABYPO/RfhqZrPbrGMFPP56Vc9nfY27ninD7eHUpyvQXQ88+gU3xXabFSZw6YgbkN9AEAxqZOAxTHLEpdPRCgSluFLCgbpu5VZpFzrhdoklcHBTCVQLlgANSuzNRCZMjdFLympHUGEr2HuM25+bYpFMgUUIdQ83yHggREgTI5zdPUGMo6CGQgDOoD8D7aUhjSDtl6PZ/FTmWZqYtZhuoiApQIRmSIACWGaQXk2KlWMK2BalvJ5jGvop4e3mHP/deJ7iHfvfHtmGipvw3R7BeAMLvBUDCEGcDiYYd+ztALusS1JX01obQAAAAASUVORK5CYII=':'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAARZJREFUWEft1b0OgjAQB/A7EFd9FFeZ4Al8BZwlJj6J0bDLm8AEq4/iaPyghgQWlF57XUg81qPtj3+vBWFiD07MAwKidkQSkoSoBKi69ND/JRQd1fIewMZr3ljtZzmVAFV36qEW8whUAQCrbqHr/IlxecAbtfBYnQ36genXcEKxQBqMM8oaZIBxQlmBdNvUKfpeYqOMQVTPtIJBg7NQRiAK058q0/d0J5AE2S5i+/4QpwVxJ+eOa3FaUJipC4BKBl9hdM+MoRRAWadezLoYw6xRHEw/ZgxVpd5oENqE1llTIEDk8lv4RmFepbhlJdQOCs+vRPn+ot7hift/spmHPGUuCM5YAVGpSUKSEJUAVZcekoSoBKj6B/8PriXdrvyRAAAAAElFTkSuQmCC'}`"
                    @select="handleSwitch"
                >
                    <div v-if="open" style="position: absolute">
                        ddddddd
                    </div>
                </vue-switch>
```

scroll
```
<template>
    <div v-if="isSmall" data-log-control="返回顶部" @click="backTop" class="icon-text-scroll" v-show="flagShow">
        &nbsp;&nbsp;&nbsp;&nbsp;TOP
    </div>
    <div v-else data-log-control="返回顶部" @click="backTop" class="text-scroll" v-show="flagShow">TOP</div>
</template>
<script>
export default {
    name: "VueScrollTop",
    props: {
        scrollWrapper: {
            require: true,
        },
        isSmall: {
            type: Boolean,
            require: false,
        },
    },
    data() {
        return {
            flagShow: false,
        };
    },
    mounted() {
        this.scrollWrapper.addEventListener("scroll", this.scrollToTop);
    },
    destroyed() {
        this.scrollWrapper.removeEventListener("scroll", this.scrollToTop);
    },
    methods: {
        backTop() {
            let timer = setInterval(() => {
                let ispeed = Math.floor(-this.scrollTop / 5);
                this.$parent.$refs.wrap.scrollTop = this.scrollTop + ispeed;
                if (this.scrollTop === 0) {
                    clearInterval(timer);
                }
            }, 16);
        },
        scrollToTop() {
            let scrollTop = this.scrollWrapper.scrollTop;
            this.scrollTop = scrollTop;
            if (this.scrollTop > 10) {
                this.flagShow = true;
            } else {
                this.flagShow = false;
            }
        },
    },
};
</script>
<style scoped lang="scss">
.text-scroll {
    display: flex;
    align-items: center;
    justify-content: space-around;
    box-sizing: border-box;
    min-width: 50px;
    height: 44px;
    color: #6994ff;
    font-size: 16px;
    border: 2px solid #6994ff;
    opacity: 1;
    border-radius: 6px;
    background: #ffffff;
    &:hover {
        cursor: pointer;
        color: #fff;
        background: #6994ff;
    }
}
.icon-text-scroll {
    display: flex;
    box-sizing: border-box;
    align-items: center;
    justify-content: space-around;
    padding-top: 3px;
    min-width: 80px;
    height: 44px;
    color: #6994ff;
    font-size: 16px;
    border: 2px solid #6994ff;
    opacity: 1;
    border-radius: 6px;
    background: #ffffff
        url("#ffffff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAoCAMAAABU4iNhAAAATlBMVEUAAABgj/9ol/9qlf9ok/9pk/9olf9nk/9plP9ok/9ok/9plP9olP9ok/9olP9pk/9plP9plP9ok/9plP9plP9olP9ok/9ok/9olP9plP/158hoAAAAF3RSTlMAECAwQFBgb3CAkKCwuL/AzM/Q2ODw/CrYfgEAAAC1SURBVDjL7dTLEsIgDAXQVOqramtrtc3//6gUSkgQKCs3ejchk7NgwgwA38mu0B0R26oENtOE+CigB1wy91UZ1NmiBOcNSlDLLPVwkRnKoJFJyqGVCergi8kodfB5N+WWXBZB1ZlaXxLUQ1glxCmDJKOUQy8jVEAmP2gtIJdEWyt7AYUkattBQCkd3ZvmJGAgLR3Wi571kWAo5bRSbLehlFPIyWT+UhVI87hj0a/YjHhV8At5A1O0J0nyFXxWAAAAAElFTkSuQmCC) no-repeat 0.12rem 53%")
        no-repeat 12px 53%;
    background-size: 18px 20px;
    cursor: pointer;
    &:hover {
        color: #fff;
        background: #6994ff
            url("#6994ff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAoCAMAAABU4iNhAAAASFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////neHiwAAAAF3RSTlMAECAwQFBgb3CAkKCwuL/AzM/Q2ODw/CrYfgEAAACpSURBVDjL7dTJEsIgDAbgIHWrWu2ief83tQMlTShLTl7qfwmZfAcmzADwmxyU7ozYGQ1scc6ooCd06Y0S1inBGmWwTAUs0Qjm6QbmaICfGg3w/XLlkaUE7dPV5pahK4RFQpoySDJJOVxlggrI5IY2AnJJtPOyF1BIor4dBJQy0KNrLgJG0tNhueh1PhKMpZway3YbSzmFkszmL61CusedVL9iO+Hdwh7yBUEAJJxihvOTAAAAAElFTkSuQmCC) no-repeat 0.12rem 53%")
            no-repeat 12px 53%;
        background-size: 18px 20px;
    }
}
</style>
```
::: tip 总结
可以看到组件发布其实挺简单的，主要是要把 package 里面配置好。同理可以在内网发布相关的包文件。
:::
