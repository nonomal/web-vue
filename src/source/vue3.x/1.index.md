---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# 源码概览

<xminder tipkey="b"/>

![](./1.index.png)

## 源码调试

- 下载 vue3.x

```sh
git clone https://github.com/vuejs/core
```

- 开启 source map 模式

```json
// package.json
...
    "dev": "node scripts/dev.js --sourcemap",
...
```

- 打包

```
npm run dev
```

- 使用 live-server(需安装 vscode 插件) 打开 examples 目录下的 demo 文件

用户使用vue3.x
```js
// main.js
const app = createApp(App)
app.use(ElementPlus, { locale })
app.mount('#app')
```
## 流程概述
createApp会在内部通过执行createRenderer函数返回一个对象
```js
{
  render,
  createApp:createAppApi(render)
}
```
createApp(App)实际上就是执行
```js
createAppApi(App)
```
返回一个对象
```
{
  use:相关函数,
  mount:相关函数,
  ...
}
```
执行mount，会依次将根节点生成vnode,然后调用上述render函数

render函数通过patch将递归遍历整个项目节点，根据不通类型进入不通函数处理

如果是组件节点，会通过创建组件实例-->设置组件实例（期间会调用setup函数）-->完成组件实例的设置后查看是否需要编译-->设置并运行带有副作用的渲染函数-->通过effect的update调用render函数

上述组件在是否需要编译的地方如果需要编译，会通过compiler函数依次执行parse --> ast -_> gencode --> render函数

通过上述递归方式将所有组件通过render函数渲染一边后，就能实现vue3.x的整个运行流程
